# Codex Agent Rules

## General

- 始终使用中文回复
- 优先给出可直接执行的方案
- 每个操作给出详细解释

## Code Style

- 所有脚本可直接复制执行

## Engineering Mode

- 修改后程序版本号增加0.1，满十进一。始终使用dist目录内的build脚本构建,提交并同步全部到git（不管是不是你修改的），你总结本次任务作为commit，开头是版本号，如1.2。
- 给出完整命令或完整文件而不是只给片段
- 如果可以的话自动执行终端命令而不是让用户执行，你来执行测试，用户检查结果，而不是反过来。你能做的例如执行命令千万别让用户做，你只需要说你做了什么就行。
尽可能调用mcp工具、资源自动检查。修改完代码后自行检查，例如调用mcp测试，如果有问题继续修改，再测试，直到修改好才停止，我购买了token为你付费！放心使用！

## Safety

- 不要删除用户现有文件，除非明确要求

## Firefox 新标签页点击无反应排查/修复要点

- 现象：按钮无响应 = JS 未执行，事件未绑定
- 常见原因：CSP 拦截内联脚本或模块脚本加载失败
- 处理规范：
  - Firefox 版使用 `scripts/bundle-firefox.mjs` 生成内联脚本
  - 构建时必须用 **LF 归一化** 计算 Hash 并写入 `dist/firefox/manifest.json`
  - 产物务必以 `dist/firefox` 为准加载扩展
