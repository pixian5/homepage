
创建一个Chrome、Firefox的插件，功能是替换浏览器新标签页
⸻

1. 新标签页替换与多浏览器兼容
	1.	新标签页彻底替换为插件自定义主界面（覆盖默认页面）。
	2.	同时支持 Chrome（Manifest V3） 与 Firefox 两套 Manifest 配置。
	3.	构建/发布层面支持一套代码、两份 manifest（Chrome / Firefox）切换产物。
	4.	新标签页入口统一：浏览器打开新标签页时直接进入插件主界面，无中间跳转页。

⸻

2. 主界面网格面板

2.1 背景（每日 Bing）
	1.	主界面背景默认使用每日 Bing 壁纸，缓存本地避免再次打开重新下载。
	2.	背景获取失败时自动回退：优先使用上一次缓存背景；仍失败则使用默认纯色背景。
	3.	背景加载过程提供状态反馈（例如“正在加载今日壁纸/加载失败已回退”toast 或弱提示，可在设置关闭）。

2.2 网格显示
	1.	默认显示按钮网格：3 行 × 8 列。
	2.	网格可随窗口宽度自动调整行列数（例如：6/8/10/12 列）。
	3.	提供“固定布局”开关：
	•	开启固定布局 → 指定行 × 列
	•	关闭固定布局 → 自适应列数 + 自动拓展行数
	4.	每个按钮显示：图标（favicon/自定义/标题名头像颜色可选）+ 标题（第一次创建时默认网站标题，可编辑文字和颜色）。

2.3 空状态指引
	1.	初次使用或无任何按钮时，主界面居中显示引导文案：
	•	“点击右上角【新增】 来添加卡片。如果有备份，可以去【设置】恢复备份”
	2.	空状态引导支持“不再提示”（可选）。

⸻

3. 顶部与右上角工具栏（主界面固定入口）
	1.	顶部区域提供
	•	搜索网页框（设置内可选开关）
	•	右上角按钮：新增、批量删除、打开方式、设置、搜索（点击后弹出窗口，搜索网址、标题）
	2.	右上角“打开方式”支持三种模式切换：
	•	本页打开
	•	新页打开
	•	在后台打开（不切换焦点）
	3.	工具栏按钮悬停提示（tooltip）：说明按钮作用（可本地化）。

⸻

4. 按钮行为
	1.	左键单击按钮 → 打开链接。
	3.	鼠标悬停按钮 → 显示完整标题和 URL 的气泡提示（tooltip），鼠标移开前不自动消失。
	4.	打开失败时提供明确提示（toast/弹窗）：例如 URL 无效、被拦截等。

⸻

5. 搜索与过滤（可选但推荐）
	1.	面板顶部搜索框：输入关键词即时过滤按钮。
	2.	模糊匹配范围：按标题/URL 模糊匹配。
	3.	搜索结果实时展示，无需确认按钮。
	4.	可选集成默认搜索引擎：
	•	搜索框既可过滤本地按钮，也可按回车触发默认搜索引擎搜索（开关可选）。
	5.	搜索范围可选（可选功能）：仅当前分组 / 全部分组 / 当前文件夹内。

⸻

6. 新增按钮与编辑（CRUD）

6.1 新增按钮
	1.	点击右上角“新增按钮”打开新增流程。
	2.	新增流程包含：输入网址、标题、选择图标来源：
	•	自动抓取 favicon
	•	自定义上传图标
	•	颜色头像（字母头像 + 背景色，可选配色）
	3.	支持“从当前标签页添加”：一键将当前标签页 URL（+ 标题）加入。
	4.	URL 校验与规范化（按你的要求）：
	•	URL 不合法给出友好提示
	•	用户可选“自动补全 scheme”（缺少协议时可选择补 http:// / https:// / ftp / mailto）

6.2 编辑按钮
	1.	右键菜单或按钮入口打开编辑界面。
	2.	可编辑字段：标题、URL、图标（自动抓取/上传/颜色头像/可选远程图标 URL）。
	3.	实时显示图标预览。
	4.	保存前进行 URL 合法性校验，不通过则阻止保存并提示原因。

6.3 删除按钮（单个/批量）
	1.	单个按钮删除功能：通过右键菜单/更多入口。
	2.	批量删除功能：多选后执行批量删除。
	3.	删除策略可选：
	•	永久清除
	•	回收站暂存（可选）
	4.	删除操作均产生清晰反馈提示（toast）。

⸻

7. Undo / Toast / 提示体系（你问的“提示呢”在这里）

7.1 Toast 通用规范
	1.	任何关键操作成功/失败都显示 toast：
	•	新增成功、编辑成功、删除成功、导入成功/失败、导出成功、同步开启/关闭迁移完成/失败、备份创建/恢复、图标刷新完成/失败、背景更新完成/失败等。
	2.	toast 支持两类：
	•	普通提示（自动消失）
	•	可操作提示（带按钮，如“撤销/重试/查看详情”）

7.2 Undo：删除后 5 秒撤销（明确提示内容与交互）
	1.	删除单个按钮后显示 toast：
	•	文案示例：“已删除「标题」” + 操作按钮 “撤销”
	2.	批量删除后显示 toast：
	•	文案示例：“已删除 X 个快捷按钮” + 操作按钮 “撤销”
	3.	toast 展示时长：5 秒，倒计时结束后删除确认落地。
	4.	用户在 5 秒内点击“撤销”：立即恢复上次备份。
	5.	5 秒后不点击撤销：
	•	若启用“回收站”：进入回收站
	•	若永久删除：不可直接撤销，但可通过“备份管理”恢复（若启用了自动备份）
	6.	撤销成功提示：toast 显示 “已恢复”（可选）。

⸻

8. 拖拽排序与交互预览
	1.	支持拖拽按钮调整顺序。
	2.	拖拽时显示占位预览（插入位置提示）。
	3.	拖拽到“文件夹/分组”上可加入对应类别（见后续文件夹/分组规则）。
	4.	拖拽取消/失败提供提示（toast）。

⸻

9. 分组与文件夹（数据组织）

9.1 分组 Tab
	1.	左侧或顶部显示分组 Tab（例如：工作/娱乐/工具）。
	2.	分组名称可自定义，可新增/编辑/删除/排序（可选但建议）。
	3.	点击 Tab 切换不同组别面板。
	4.	支持鼠标滚轮在组别间快速切换（可开关）。
	5.	支持批量移动：多选后移动到指定分组。
	6.分组可重命名

9.2 文件夹功能
	1.	拖拽按钮放到另一个按钮上创建文件夹。
	2.	文件夹内显示子网格列表（与主网格一致的按钮样式）。
	3.	点击文件夹打开内容层；右上角按钮返回主面板；也可点击空白处关闭（可选）。
	4.	支持重命名文件夹。
	5.	支持将按钮拖入/拖出文件夹，文件夹内可拖拽排序（可选但推荐）。
	6.	支持解散文件夹（可选）：解散后子项回到文件夹所在层级。

9.3 多选批量操作
	1.	框选、Shift+点击、Ctrl/⌘+点击 多选模式。
	2.	支持批量：移动到分组、删除、打开链接（后台/前台遵循打开方式设置）。

⸻

10. 图标处理与缓存（按你的要求完整保留）

10.1 图标抓取策略
	1.	自动从网址获取 favicon。
	2.	若抓取失败：使用“字母头像 + 背景色”兜底。
	3.	支持用户自定义上传图标替换。
	4.	（可选）支持远程图标 URL，并明确提示会产生外部请求。

10.2 图标缓存
	1.	获取到的图标缓存到本地，避免频繁请求。
	2.	支持手动“获取/刷新全部图标”。
	3.	对“设为自动获取图标但获取失败的无图标按钮”：每天下午 6 点自动重试一次。
	4.	图标缓存不参与同步与备份（仅本地保存）。

⸻

11. 导入/导出 & 迁移（按你的要求完整保留）
	1.	支持导出全配置 JSON（包含标题/URL/分组/排序/文件夹结构/图标信息）。
	2.	支持从 JSON 导入配置。
	3.	导入策略可选择：覆盖所有 / 合并现有 / 仅新增不覆盖。
	4.	JSON 带版本号 schemaVersion，支持历史配置升级兼容。
	5.	导入时自动检查冲突并提示用户处理策略（如重复 URL、同名分组、ID 冲突等）。
	6.	导入失败提供详细错误提示（具体哪一项/原因/建议修复方式）。

⸻

12. 自动备份与恢复（按你的要求完整保留）
	1.	每次修改前自动生成备份文件（命名含时间戳：年月日时分秒）。
	2.	“设置 -> 备份管理”可查看备份列表并恢复。
	3.	可设置最大备份份数：
	•	超过自动清理旧备份
	•	或不限制备份数
	4.	恢复备份后给出提示（toast）并可选提供“撤销恢复”（可选）。

⸻

13. 存储层 & 同步机制（可插拔 Provider，按你的要求完整保留）

13.1 存储结构
	1.	默认存储：storage.local。
	2.	可开启同步：同步到 storage.sync（配额限制提示）。
	3.	Storage Provider 可插拔：便于未来扩展其他 Provider。
	4.	图标缓存只保存在本地，不做同步。

13.2 数据迁移策略
	1.	开启同步：自动将 local 数据迁移到 sync。
	2.	关闭同步：可将 sync 迁移回 local。
	3.	迁移过程提供进度/结果提示（toast/弹窗）。
	4.	迁移失败提供可重试与错误原因提示。
	5.多设备冲突提示：合并、仅云端（删除本地数据并替换为云端新数据）、仅本地（本地替换云端）

⸻

14. 设置界面（完整模块）
	1.	右上角进入“设置”总入口。
	2.	设置模块包含：
	•	新增按钮入口
	•	导入/导出配置
	•	同步开关与迁移
	•	备份管理
	•	主题设置
	•	背景设置（Bing/纯色/渐变/自定义图）
	•	网格布局设置（固定/自适应、行列、密度）
	•	搜索设置（本地过滤/默认搜索引擎集成开关）
	•	图标设置（抓取策略、兜底头像、缓存管理、18:00 重试开关）
	•	打开方式设置（默认打开方式）
	•	权限与隐私说明
	•	数据重置（清空配置/清空缓存/恢复默认，可选）

⸻

15. 外观 & 个性化（按你的要求完整保留）
	1.	主题：浅色/深色跟随系统或手动切换。
	2.	背景：纯色/渐变/自定义图片上传（可选），默认每日 Bing。
	3.	背景淡入淡出效果（可选开关）。
	4.	卡片间隙：紧凑/标准/宽松（影响按钮大小、文字大小、间距）。

⸻

16. 交互与无障碍（按你的要求完整保留）
	1.	键盘导航：方向键移动焦点、Enter 打开、Delete/Backspace 删除（可选开关）。
	2.	Tab 键遍历所有可交互元素（搜索框、按钮、分组、设置等）。
	3.	所有功能具备键盘可操作支持（含弹层/文件夹层的焦点管理）。

⸻

17. 权限与隐私说明（按你的要求完整保留）

17.1 权限
	1.	storage（必需）。
	2.	tabs 或 activeTab（用于“一键添加当前标签页”）。
	3.	favicon 抓取跨域若需额外 host 权限：默认尽量减少权限请求，并在设置说明原因与影响。

17.2 隐私声明
	1.	不收集任何用户数据。
	2.	配置数据仅存储本地或用户开启同步后进入同步存储。
	3.	若使用远程图标 URL：明确提示可能发起外部请求，并提供关闭选项。

⸻

18. 错误处理与提示（按你的要求完整保留）
	1.	URL 输入不合法：友好提示（指出问题点）。
	2.	JSON 导入失败/冲突：弹出详细错误提示与处理策略选择。
	3.	操作失败提供可重试选项。
	4.	重要操作（删除/批量删除/清空）都有清晰提示与撤销通道（Undo 或备份恢复入口）。

⸻

19.固定常用操作快捷键（如跳到搜索框，Esc 关闭文件夹层）
